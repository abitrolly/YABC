## ЭКБЯ: общие сведения ##

В этом репозитории находится &laquo;Экспериментальный корпус белорусского языка&raquo;, разработка которого была начата в 2012 году на филологическом факультете БГУ. В версии от 28 ноября 2013 г. (первый открытый релиз) объём корпуса составляет около 7 млн токенов газетных и художественных текстов. Морфологическая разметка нанесена с помощью [лемматизатора ЭКБЯ](https://github.com/poritski/YABC_Tagger), омонимия не снята. Корпус оснащён мощной поисковой программой для оффлайнового использования.

## Подготовка к работе ##

Скачайте [ZIP-архив с файлами проекта](https://github.com/poritski/YABC/archive/master.zip) и распакуйте его куда-либо на локальной машине. Для поиска в ЭКБЯ нужен интерпретатор [Perl](http://www.activestate.com/activeperl/downloads) 5.x (лучше всего 5.10 или более новый) с установленными модулями [`Array::Utils`](http://search.cpan.org/dist/Array-Utils/Utils.pm), [`List::Util`](http://search.cpan.org/~pevans/Scalar-List-Utils-1.31/lib/List/Util.pm), [`Benchmark`](http://search.cpan.org/~rjbs/perl-5.18.1/lib/Benchmark.pm) и [`Storable`](http://search.cpan.org/~ram/Storable-1.0.14/Storable.pm). Программная часть разработана под ОС Windows, но её перенос на Unix-подобные ОС не должен вызывать затруднений.

Чтобы подготовить поисковик к работе, нужно собрать вспомогательные файлы-индексы. Для этого запустите скрипт `MAKE.bat` (или его адаптацию под Unix shell). Индексация может занять несколько минут.

## Структура ресурса ##

Структура ЭКБЯ такова:

*  `./docs` (папка с документацией)
*  `./main`
   *  `/data`
   *  `/metadata`
   *  `/index`
*  `./np_old`
   *  `/r`
   *  `/t`

В папке `./np_old` содержится демонстрационный фрагмент коллекции белорусских газет 1960-х годов: &laquo;Літаратура і мастацтва&raquo; за январь 1961 г., &laquo;Голас Радзімы&raquo; за январь 1962 г. В поддиректории `/r` находятся &laquo;сырые&raquo; тексты, а в `/t` – токенизированные. Работа над этой частью корпуса сейчас приостановлена, т. к. качество текстов остаётся низким даже после постобработки, из-за чего не видно смысла в их лемматизации.

`./main` – это основная рабочая папка. В поддиректории `/data` содержится текстовая база корпуса: художественная проза, опубликованная в журналах [&laquo;Дзеяслоў&raquo;](http://www.dziejaslou.by) (`corpus_DZSL.txt`), [&laquo;Маладосць&raquo;](http://www.maladost.lim.by) (`corpus_MAL.txt`) и [&laquo;Полымя&raquo;](http://www.polymja.lim.by) (`corpus_POL.txt`) в 2009–2011 гг., а также статьи из газет [&laquo;Звязда&raquo;](http://www.zvyazda.minsk.by/ru/main) (`corpus_ZV.txt`), [&laquo;Чырвоная змена&raquo;](http://www.zvyazda.minsk.by/ru/pril/index.php?id=30) (`corpus_ZM.txt`) за август 2008 – июль 2009 г., [&laquo;Голас Радзімы&raquo;](http://www.golas.by) (`corpus_G.txt`) за январь 2008 – декабрь 2009 г. Кроме того, сформирована небольшая коллекция художественной прозы 1910–1950-х гг. (`corpus_OLD.txt`): тексты З. Бядули, Я. Коласа, М. Горецкого, К. Чорного, М. Зарецкого. Из приблизительно 7500 публикаций &laquo;Звязды&raquo; за указанный период в корпус вошло 5000, две другие газеты учтены полностью. Журнальная проза подвергалась отбору и сокращению, с тем чтобы доля текстов каждого автора во всей коллекции не превышала 2%. Вот объёмы подкорпусов:

<center>
<table>
<tr align="center"><td>Подкорпус</td><td>Токенов</td></tr>
<tr><td>&laquo;Дзеяслоў&raquo;</td><td>790798</td></tr>
<tr><td>&laquo;Маладосць&raquo;</td><td>1022215</td></tr>
<tr style="border-bottom: double;"><td>&laquo;Полымя&raquo;</td><td>1059707</td></tr>
<tr><td>&laquo;Звязда&raquo;</td><td>2481775</td></tr>
<tr><td>&laquo;Чырвоная змена&raquo;</td><td>375269</td></tr>
<tr style="border-bottom: double;"><td>&laquo;Голас Радзімы&raquo;</td><td>417550</td></tr>
<tr style="border-bottom: double;"><td>Старая проза</td><td>728603</td></tr>
<tr><td>Всего</td><td>6875917</td></tr>
</table>
</center>

Поскольку все файлы данных обработаны с помощью [лемматизатора ЭКБЯ](https://github.com/poritski/YABC_Tagger), они имеют формат TSV со следующими полями:

*  идентификатор текста;
*  порядковый номер токена;
*  сам токен;
*  начальная форма;
*  грамматический разбор.

Омонимия не снята. Грамматические ярлыки даются в соответствии с [тегсетом ЭКБЯ](http://htmlpreview.github.io/?https://github.com/poritski/YABC_Tagger/blob/master/docs/tagset_YABC_RU.html).

В поддиректории `/metadata` находятся файлы с именами типа `metadata_DZSL.txt`, по одному на каждую текстовую коллекцию. Они содержат метаинформацию о текстах и имеют формат TSV со следующими полями:

*  идентификатор текста;
*  имя исходного файла;
*  автор(ы);
*  название;
*  жанр;
*  выходные данные;
*  электронный адрес (если есть).

Жанр газетных текстов не определялся и был обозначен `NONE`.

В поддиректории `/index` должны находиться вспомогательные файлы-индексы с именами типа `index_DZSL.dat`, по одному на каждую текстовую коллекцию. Пока их там нет, поиск в корпусе невозможен.

## Поиск в корпусе ##

Основной корпус и демонстрационный фрагмент коллекции газет 1960-х гг. оснащены двумя разными поисковыми программами. Поисковые скрипты называются `finder.pl` и принимают единственный параметр: `-w [натуральное число]` – ширина возвращаемого контекста в токенах. Удобно запускать поиск при помощи пакетного файла `FIND.bat` (или его адаптации под Unix shell), где по умолчанию ширина контекста выставлена равной 10; пользователь может менять это значение. Можно задавать одновременно несколько запросов, каждый из которых должен располагаться на отдельной строке в файле `wordlist.txt` в соответствующей папке.

### Основной корпус ###

В основном корпусе доступен выбор подкорпусов: в файле `subcorpora.txt` достаточно проставить единицы против тех текстовых коллекций, поиск по которым желает осуществить пользователь, а остальным сопоставить нули.

#### Синтаксис запросов ####

Запрос на поиск в основном корпусе должен состоять из чётного числа полей, разделённых знаком табуляции. Первое поле – идентификатор запроса; его задаёт пользователь в любом удобном для себя виде. Второе и последующие (если есть) поля описывают токены и промежутки между ними. Более точно, поля 2, 4 и т. д. задают условия на токены, а поля 3, 5 и т. д. – условия на промежутки.

Каркас каждого условия на токен составляют два октоторпа: `##`. По символу октоторпа условие дробится на три части, характеризующие:

1. сам токен;
2. лемму, поставленную ему в соответствие;
3. грамматическую характеристику, присвоенную ему.

Каждая часть может быть пуста (так, например, `##` означает любой токен, без каких-либо ограничений) или представлять собой [регулярное выражение](http://ru.wikipedia.org/wiki/Регулярные_выражения). Возможности Perl-совместимых регулярных выражений (PCRE) поддерживаются в полном объёме. Это значит, что можно использовать метасимволы, задавать классы и последовательности символов, в том числе с группировкой и перечислением, и др.

Условия на промежутки устроены проще и отвечают схеме `(x..y)`, где `x`, `y` – натуральные числа, `x` < `y`. Первое число задаёт наименьшую, а второе – наибольшую длину промежутка между двумя искомыми токенами. Так, например, чтобы обозначить контактное расположение токенов, достаточно задать условие вида `(1..1)`. Диапазон длин может быть произвольно велик, например, `(1..50)`, но следует помнить, что быстродействие поиска линейно зависит от диапазона длин в каждом условии на промежуток.

#### Примеры ####

В этом параграфе мы сформулируем несколько поисковых задач и покажем, как белорусист может решить их с помощью ЭКБЯ.

<span>1</span>. Как часто в текстах разных периодов и стилей встречается наречие <i>борздзенька</i>, а как часто – <i>хуценька</i>?

Поскольку слова неизменяемые, достаточно задать поиск по точным формам слов. Воспользуемся метасимволами `^` и `$`, которые в регулярных выражениях означают, соответственно, начало и конец текстовой строки. Получатся, например, такие запросы:

<span style="padding-left: 3em">`борздзенька	^борздзенька$##`</span><br>
<span style="padding-left: 3em">`хуценька	^хуценька$##`</span><br>

Первый запрос можно ещё усложнить с учётом возможных вариантов написания и постановки ударения:

<span style="padding-left: 3em">`борздзенька	^б[оа]рзь?(дз)?енька$##`</span><br>

<span>2</span>. С какими прилагательными сочетается существительное <i>настаўніца</i>?

Ясно, что прилагательное должно находиться либо в форме женского рода единственного числа, либо в форме множественного числа, а о существительном известна только начальная форма. Будем искать конструкции с препозитивным прилагательным, которое отделено от существительного не более чем 5 словами. Получится, например, такой запрос:

<span style="padding-left: 3em">`Adj + настаўніца	##^Adj:[f0]	(1..5)	#^настаўніца$#`</span><br>

<span>3</span>. Какие пары прилагательных в белорусских текстах противопоставляются союзом <i>але</i>?

Будем искать конструкции вида <i>Adj, але Adj N</i>, где токены находятся на единичном расстоянии друг от друга. Для запятой и союза <i>але</i> можно задать точные формы, а для остальных членов конструкции следует указать только самую общую грамматическую информацию. Надо учесть, что существительное может быть как нарицательным (в тегсете обозначается `N`), так и собственным (`NP`). В итоге получится, например, такой запрос:

<span style="padding-left: 3em">`Adj, але Adj + N	##^Adj:	(1..1)	^,$##	(1..1)	^але$##	(1..1)	##^Adj:	(1..1)	##^NP?`</span><br>

<span>4</span>. Как часто в текстах разных периодов и стилей встречается т. н. белорусский плюсквамперфект – конструкции типа <i>хадзіў быў</i>, <i>напісала была</i>?

Ожидается, что словоформы, из которых состоит оборот, должны быть глаголами в форме прошедшего времени изъявительного наклонения и располагаться рядом. Чтобы учесть как постпозитивное, так и более редкое препозитивное расположение формы глагола <i>быць</i>, создадим два запроса, которые различаются только порядком искомых токенов:

<span style="padding-left: 3em">`plusquamperfectum (1)	#^быць$#^V:.{3}:ia	(1..1)	##^V:.{3}:ia`</span><br>
<span style="padding-left: 3em">`plusquamperfectum (2)	##^V:.{3}:ia	(1..1)	#^быць$#^V:.{3}:ia`</span><br>

<span>5</span>. Как часто в белорусских текстах встречается &laquo;русская&raquo; модель управления глагола <i>дзякаваць</i>, с винительным, а не дательным падежом?

Будем считать, что глагол располагается рядом с зависимым словом и что это зависимое слово – либо существительное (нарицательное или собственное, называющее лицо), либо личное местоимение. Кроме <i>дзякаваць</i>, учтём родственные ему глаголы <i>падзякаваць</i>, <i>аддзякаваць</i>, <i>падзячыць</i>, <i>аддзячыць</i>. В результате получится, например, такой запрос:

<span style="padding-left: 3em">`дзякаваць + Він.	#^(ад|па)?(дзякаваць|дзячыць)$#	(1..1)	##^(N|NP(_(fn|mn|surn))?|Pron:pers):.{1}:.{1,2}A$`</span><br>

### Газеты 1960-х гг. ###

Запрос на поиск в демонстрационном фрагменте коллекции газет 1960-х гг. должен состоять из двух полей, разделённых знаком табуляции: идентификатор запроса и условие на токен (регулярное выражение). В отличие от основного корпуса, поиск по неоднословным конструкциям не поддерживается. Кроме того, отсутствует поиск по леммам и грамматическим разборам, потому что тексты не лемматизованы.

Нужно помнить, что из-за невысокого качества распознавания в текстах газет 1960-х гг. кириллические символы часто смешиваются друг с другом и с латинскими символами. Поэтому, например, запрос на поиск любой формы слова <i>космас</i> уместно сформулировать так:

<span style="padding-left: 3em">`космас	к[оo][сc]м[аa][сc]([аa](м)?|[уy]|[еe]|[сc])?`</span><br>

Этому поисковому запросу, среди прочего, удовлетворяет токен <i>космасс</i> – обычно результат ошибочного распознавания конечного <i>е</i> как <i>с</i> (должно быть: <i>космасе</i>). В квадратных скобках, т. е. как равноправные варианты, приводятся пары одинаково пишущихся латинских и кириллических символов.

## Условия использования ##

Авторские права на тексты, содержащиеся в корпусе, принадлежат их авторам и издателям. Распространение текстовой базы корпуса регламентировано Законом РБ &laquo;Об авторском праве и смежных правах&raquo; от 17 мая 2011 г. № 262-З, в котором говорится:

> Статьи и иные малообъёмные произведения, правомерно опубликованные в сборниках, а также газетах, журналах и других печатных средствах массовой информации, отрывки из правомерно опубликованных литературных и иных произведений могут быть воспроизведены посредством репродуцирования и иного воспроизведения в образовательных и исследовательских целях.

<span style="padding-left: 3em">(статья 36, п. 2)</span>

Вся программная часть распространяется под BSD-подобной лицензией из 2 пунктов, см. её текст [по-русски](license_RU.md) или [по-английски](license_EN.md). Если вы используете корпус в своих исследованиях, желательно (хотя и не обязательно) ссылаться либо на страницу нашего проекта, либо на несколько уже устаревшую статью: _О. А. Волчек, В. В. Порицкий._ Экспериментальный корпус белорусского языка: текущее состояние и перспективы развития // Труды международной конференции &laquo;Корпусная лингвистика–2013&raquo;. – СПб.: СПбГУ, 2013. – С. 231–238.

## История версий ##

_3 октября 2012 г.:_ Опубликован демонстрационный фрагмент корпуса.

_1 апреля 2013 г.:_ Добавлен токенизатор. Программы индексации и поиска усовершенствованы для работы с токенизированными текстами. Из выдачи убрана статистика частот словоформ.

_16 апреля 2013 г.:_ Добавлен демонстрационный фрагмент коллекции газет 1960-х годов (набросок документации см. в `./np_old/DEPENDENCIES.md`).

_28 ноября 2013 г.:_ Первый полный релиз. Тексты основного корпуса лемматизованы, доступен поиск по неоднословным конструкциям с учётом лемм и грамматических разборов.
