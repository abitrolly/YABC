## ЭКБМ: агульныя звесткі ##

У гэтым рэпазіторыі знаходзіцца &laquo;Эксперыментальны корпус беларускай мовы&raquo;, які распрацоўваецца з 2012 года на філалагічным факультэце БДУ Аксанай Ваўчок і Уладзіславам Парыцкім. У версіі ад 28 лістапада 2013 г. (першы адкрыты рэліз) аб'ём корпуса склаў каля 7 млн токенаў газетных і мастацкіх тэкстаў. Для марфалагічнага анатавання выкарыстоўваўся [лематызатар ЭКБМ](https://github.com/poritski/YABC_Tagger), аманімія не здымалася. Корпус суправаджаецца пошукавай праграмай для офлайнавага выкарыстання.

## Падрыхтоўка да працы ##

Спампуйце [ZIP-архіў з файламі праекта](https://github.com/poritski/YABC/archive/master.zip) і распакуйце яго ў адвольнае месца на сваёй лакальнай машыне. Для пошуку ў ЭКБМ вам спатрэбіцца інтэрпрэтатар [Perl](http://www.activestate.com/activeperl/downloads) 5.x (лепш за ўсё 5.10 ці больш новы) з інсталяванымі модулямі [`Array::Utils`](http://search.cpan.org/dist/Array-Utils/Utils.pm), [`List::Util`](http://search.cpan.org/~pevans/Scalar-List-Utils-1.31/lib/List/Util.pm), [`Benchmark`](http://search.cpan.org/~rjbs/perl-5.18.1/lib/Benchmark.pm) і [`Storable`](http://search.cpan.org/~ram/Storable-1.0.14/Storable.pm). Праграма распрацавана пад аперацыйную сістэму Windows, але карыстальнікі Unix-падобных сістэм не павінны сутыкнуцца з вялікімі цяжкасцямі пры яе адаптацыі.

Каб падрыхтаваць пошукавы рухавік да працы, патрэбна папярэдне сабраць дапаможныя файлы-індэксы. Для гэтага запусціце скрыпт `MAKE.bat` (ці яго адаптацыю пад Unix shell). Індэксацыя можа працягвацца некалькі хвілін.

## Структура рэсурса ##

ЭКБМ мае наступную структуру:

*  `./docs` (дырэкторыя з дакументацыяй)
*  `./main`
   *  `/data`
   *  `/metadata`
   *  `/index`
*  `./np_old`
   *  `/r`
   *  `/t`

У дырэкторыі `./np_old` змяшчаецца дэманстрацыйны фрагмент калекцыі беларускіх газет 1960-х гадоў: &laquo;Літаратура і мастацтва&raquo; за студзень 1961 г., &laquo;Голас Радзімы&raquo; за студзень 1962 г. У паддырэкторыі `/r` знаходзяцца тэксты без усялякай апрацоўкі, а ў `/t` – тыя ж тэксты пасля такенізацыі. Праца над гэтай часткай корпуса прыпынена: якасць тэкстаў застаецца вельмі нізкай нават пасля постапрацоўкі, так што лематызаваць іх пакуль не мае сэнсу.

`./main` – гэта асноўная дырэкторыя. У паддырэкторыі `/data` змяшчаецца тэкставая база корпуса: мастацкая проза, надрукаваная ў часопісах [&laquo;Дзеяслоў&raquo;](http://www.dziejaslou.by) (`corpus_DZSL.txt`), [&laquo;Маладосць&raquo;](http://www.maladost.lim.by) (`corpus_MAL.txt`) і [&laquo;Полымя&raquo;](http://www.polymja.lim.by) (`corpus_POL.txt`) у 2009–2011 гг., а таксама артыкулы з газет [&laquo;Звязда&raquo;](http://www.zvyazda.minsk.by/ru/main) (`corpus_ZV.txt`), [&laquo;Чырвоная змена&raquo;](http://www.zvyazda.minsk.by/ru/pril/index.php?id=30) (`corpus_ZM.txt`) за жнівень 2008 – ліпень 2009 г., [&laquo;Голас Радзімы&raquo;](http://www.golas.by) (`corpus_G.txt`) за студзень 2008 – снежань 2009 г. Акрамя таго, была створана невялікая калекцыя мастацкай прозы 1910–1950-х гг. (`corpus_OLD.txt`): тэксты З. Бядулі, Я. Коласа, М. Гарэцкага, К. Чорнага, М. Зарэцкага. З амаль 7500 артыкулаў &laquo;Звязды&raquo; за пазначаны час у корпус увайшло 5000, дзве астатнія газеты ўлічаны цалкам. Проза з часопісаў адбіралася і скарачалася, каб у выніковай калекцыі доля тэкстаў кожнага аўтара не была большай за 2%. Вось аб'ёмы падкарпусоў:

<center>
<table>
<tr align="center"><td>Падкорпус</td><td>Токенаў</td></tr>
<tr><td>&laquo;Дзеяслоў&raquo;</td><td>790798</td></tr>
<tr><td>&laquo;Маладосць&raquo;</td><td>1022215</td></tr>
<tr style="border-bottom: double;"><td>&laquo;Полымя&raquo;</td><td>1059707</td></tr>
<tr><td>&laquo;Звязда&raquo;</td><td>2481775</td></tr>
<tr><td>&laquo;Чырвоная змена&raquo;</td><td>375269</td></tr>
<tr style="border-bottom: double;"><td>&laquo;Голас Радзімы&raquo;</td><td>417550</td></tr>
<tr style="border-bottom: double;"><td>Старая проза</td><td>728603</td></tr>
<tr><td>Усяго</td><td>6875917</td></tr>
</table>
</center>

Паколькі ўсе тэкставыя файлы апрацаваны пры дапамозе [лематызатара ЭКБМ](https://github.com/poritski/YABC_Tagger), яны маюць фармат TSV з наступнымі слупкамі:

*  ідэнтыфікатар тэкста;
*  парадкавы нумар токена;
*  токен;
*  пачатковая форма;
*  граматычны разбор.

Аманімія не здымалася. Граматычныя тэгі падаюцца ў адпаведнасці з [тэгсэтам ЭКБМ](http://htmlpreview.github.io/?https://github.com/poritski/YABC_Tagger/blob/master/docs/tagset_YABC_BE.html).

У паддырэкторыі `/metadata` знаходзяцца файлы з назвамі кшталту `metadata_DZSL.txt`, па адным на кожную тэкставую калекцыю. Яны змяшчаюць інфармацыю пра зыходныя тэксты і маюць фармат TSV з наступнымі слупкамі:

*  ідэнтыфікатар тэкста;
*  імя зыходнага файла;
*  аўтар(ы);
*  назва;
*  жанр;
*  звесткі аб публікацыі;
*  спасылка на электронны варыянт тэкста (пры яго наяўнасці).

Жанр газетных тэкстаў не вызначаўся (`NONE`).

У паддырэкторыі `/index` павінны змяшчацца дапаможныя файлы-індэксы з назвамі накшталт `index_DZSL.dat`, па адным на кожную тэкставую калекцыю. Пакуль іх няма, пошук у корпусе немагчымы.

## Пошук у корпусе ##

Да асноўнага корпуса і дэманстрацыйнага фрагмента калекцыі газет 1960-х гг. прыкладаюцца дзве розныя пошукавыя праграмы. Абодва пошукавыя скрыпты маюць назву `finder.pl` і прымаюць на ўваход толькі адзін параметр: `-w [натуральны лік]` – шырыня (у токенах) кантэкста вакол кожнага знойдзенага ўваходжання. Зручна запускаць пошукавую праграму пры дапамозе файла `FIND.bat` (ці яго адаптацыі пад Unix shell), дзе па змоўчанні шырыня кантэкста вызначана роўнай 10 токенам; карыстальнік можа змяніць гэта значэнне. Адначасова можна задаваць некалькі запытаў, кожны з якіх трэба пісаць на асобным радку ў файле `wordlist.txt` у адпаведнай дырэкторыі.

### Асноўны корпус ###

У асноўным корпусе можна выбіраць падкарпусы. Для гэтага ў файле `subcorpora.txt` дастаткова праставіць адзінкі насупраць тых тэкставых калекцый, пошук па якіх пажадана ажыццявіць, а астатнім супаставіць нулі.

Вынікі пошуку пішуцца ў файл `results.txt`, які мае фармат TSV з трыма слупкамі:

*  ідэнтыфікатар запыту;
*  знойдзены кантэкст;
*  падрабязныя звесткі пра тэкст-крыніцу.

#### Сінтаксіс запытаў ####

Запыт на пошук у асноўным корпусе павінен складацца з цотнай колькасці палёў, аддзеленых адно ад аднаго табуляцыяй. Першае поле – ідэнтыфікатар запыту; карыстальнік задае яго ў любым зручным для сябе выглядзе. Другое і наступныя (калі ёсць) палі апісваюць токены і прамежкі між імі. Больш дакладна, палі 2, 4 і г. д. утрымліваюць умовы на токены, а палі 3, 5 і г. д. – умовы на прамежкі.

Каркас кожнай умовы на токен складаюць два актаторпы: `##`. Па гэтым сімвале ўмова падзяляецца на тры часткі, якія характарызуюць:

1. сам токен;
2. адпаведную лему;
3. граматычную інфармацыю.

Кожная частка можа быць пустой (напрыклад, `##` абазначае любы токен, без якіх-небудзь абмежаванняў) ці ўяўляць сабой [рэгулярны выраз](http://ru.wikipedia.org/wiki/Регулярные_выражения). Магчымасці Perl-сумяшчальных рэгулярных выразаў (PCRE) падтрымліваюцца цалкам. Гэта значыць, можна карыстацца метасімваламі, класамі і паслядоўнасцямі сімвалаў, у тым ліку з групоўкай і пералікам, і г. д.

Умовы на прамежкі маюць больш просты сінтаксіс: яны адпавядаюць схеме `(x..y)`, дзе `x`, `y` – натуральныя лікі, `x` < `y`. Першы лік задае самую малую, а другі – самую вялікую адлегласць паміж двума токенамі. Напрыклад, умова выгляду `(1..1)` задае кантактнае размяшчэнне токенаў. Дыяпазон адлегласцей можа быць адвольна вялікім, напрыклад, `(1..50)`, але трэба памятаць, што хуткадзейнасць пошуку лінейна залежыць ад дыяпазона адлегласцей у кожнай умове на прамежак.

#### Прыклады ####

У гэтым раздзеле мы сфармулюем некалькі пошукавых задач і пакажам, як беларусіст можа вырашыць іх пры дапамозе ЭКБМ.

<span>1</span>. Наколькі часта ў тэкстах розных часоў і стыляў сустракаюцца прыслоўі <i>борздзенька</i> і <i>хуценька</i>?

Паколькі абодва словы нязменныя, дастаткова задаць пошук па дакладных формах. Скарыстаемся метасімваламі `^` і `$`, якія ў рэгулярных выразах абазначаюць, адпаведна, пачатак і канец радка (string). Атрымаюцца, напрыклад, такія запыты:

<span style="padding-left: 3em">`борздзенька`&emsp;`^борздзенька$##`</span><br>
<span style="padding-left: 3em">`хуценька`&emsp;`^хуценька$##`</span><br>

Першы запыт можна зрабіць больш складаным, каб улічыць магчымыя варыянты ў напісанні і пастаноўцы націску:

<span style="padding-left: 3em">`борздзенька`&emsp;`^б[оа]рзь?(дз)?енька$##`</span><br>

<span>2</span>. Якія прыметнікі дапасуюцца да назоўніка <i>настаўніца</i>?

Зразумела, што прыметнік павінен мець форму жаночага роду адзіночнага ліку ці форму множнага ліку. Для назоўніка вядома толькі пачатковая форма. Будзем шукаць выразы з прэпазітыўным прыметнікам, які знаходзіцца ад назоўніка на адлегласці не больш за 5 токенаў. Атрымаецца, напрыклад, такі запыт:

<span style="padding-left: 3em">`Adj + настаўніца`&emsp;`##^Adj:[f0]`&emsp;`(1..5)`&emsp;`#^настаўніца$#`</span><br>

<span>3</span>. Якія прыметнікі ў беларускамоўных тэкстах супрацьпастаўляюцца злучнікам <i>але</i>?

Будзем шукаць выразы кшталту <i>Adj, але Adj N</i>, дзе адлегласць паміж токенамі роўная 1. Для коскі і злучніка <i>але</i> пазначым дакладныя формы, а для прыметнікаў пададзім толькі граматычныя звесткі. Таксама трэба ўлічыць, што назоўнік можа быць не толькі агульным (тэг `N`), але і ўласным (`NP`). У выніку атрымаецца, напрыклад, такі запыт:

<span style="padding-left: 3em">`Adj, але Adj + N`&emsp;`##^Adj:`&emsp;`(1..1)`&emsp;`^,$##`&emsp;`(1..1)`&emsp;`^але$##`&emsp;`(1..1)`&emsp;`##^Adj:`&emsp;`(1..1)`&emsp;`##^NP?`</span><br>

<span>4</span>. Ці часта ў тэкстах розных перыядаў і стыляў ужываецца так званы беларускі плюсквамперфект – канструкцыя тыпу <i>хадзіў быў</i>, <i>напісала была</i>?

Відавочна, што словаформы, з якіх складаецца канструкцыя, – гэта дзеясловы ў форме прошлага часу абвеснага ладу, адлегласць роўная 1. Каб улічыць і постпазітыўнае, і больш рэдкае прэпазітыўнае размяшчэнне дзеяслова <i>быць</i>, складзем два запыты, якія адрозніваюцца толькі парадкам токенаў:

<span style="padding-left: 3em">`plusquamperfectum (1)`&emsp;`#^быць$#^V:.{3}:ia`&emsp;`(1..1)`&emsp;`##^V:.{3}:ia`</span><br>
<span style="padding-left: 3em">`plusquamperfectum (2)`&emsp;`##^V:.{3}:ia`&emsp;`(1..1)`&emsp;`#^быць$#^V:.{3}:ia`</span><br>

<span>5</span>. Наколькі часта ў беларускамоўных тэкстах сустракаецца &laquo;руская&raquo; мадэль кіравання дзеяслова <i>дзякаваць</i>, з вінавальным, а не давальным склонам?

Будзем лічыць, што дзеяслоў размяшчаецца побач з залежным словам, якое можа быць выражана асабовым займеннікам ці назоўнікам (агульным або ўласным асабовым). Акрамя <i>дзякаваць</i>, улічым аднакаранёвыя дзеясловы <i>падзякаваць</i>, <i>аддзякаваць</i>, <i>падзячыць</i>, <i>аддзячыць</i>. У выніку атрымаем, напрыклад, такі запыт:

<span style="padding-left: 3em">`дзякаваць + Він.`&emsp;`#^(ад|па)?(дзякаваць|дзячыць)$#`&emsp;`(1..1)`&emsp;`##^(N|NP(_(fn|mn|surn))?|Pron:pers):.{1}:.{1,2}A$`</span><br>

### Газеты 1960-х гг. ###

Запыт на пошук у дэманстрацыйным фрагменце калекцыі газет 1960-х гг. павінен складацца з двух палёў, аддзеленых табуляцыяй:

* ідэнтыфікатар запыту;
* умова на токен (рэгулярны выраз).

У адрозненне ад асноўнага корпуса, шматслоўны пошук не падтрымліваецца. Таксама адсутнічае пошук па лемах і граматычным разборах, бо тэксты не лематызаваліся.

Варта памятаць, што з-за нізкай якасці распазнавання ў тэкстах газет 1960-х гг. кірылічныя сімвалы могуць блытацца паміж сабой і з лацінскімі літарамі. Таму, напрыклад, запыт на пошук любой формы слова <i>космас</i> можна сфармуляваць наступным чынам:

<span style="padding-left: 3em">`космас`&emsp;`к[оo][сc]м[аa][сc]([аa](м)?|[уy]|[еe]|[сc])?`</span><br>

Гэтаму пошукаваму запыту, між іншым, здавальняе токен <i>космасс</i> – звычайна вынік памылковага распазнавання канцавога <i>е</i> як <i>с</i> (павінна быць: <i>космасе</i>). У квадратных дужках, г. зн. як раўнапраўныя варыянты, падаюцца пары літар з лацінскага і кірылічнага алфавітаў, якія маюць аднолькавае напісанне.

Вынікі пошуку пішуцца ў файл `results.txt`, які мае фармат TSV з пяццю слупкамі:

*  назва файла, які змяшчае тэкст-крыніцу;
*  ідэнтыфікатар запыту;
*  левы кантэкст;
*  сам знойдзены токен;
*  правы кантэкст.

## Умовы выкарыстання ##

Аўтарскія правы на тэксты, што змяшчаюцца ў корпусе, належаць іх аўтарам і выдаўцам. Распаўсюджанне тэкставай базы корпуса рэгламентуецца Законам РБ &laquo;Аб аўтарскім праве і сумежных правах&raquo; ад 17 мая 2011 г. № 262-З, у якім гаворыцца:

> Статьи и иные малообъёмные произведения, правомерно опубликованные в сборниках, а также газетах, журналах и других печатных средствах массовой информации, отрывки из правомерно опубликованных литературных и иных произведений могут быть воспроизведены посредством репродуцирования и иного воспроизведения в образовательных и исследовательских целях.

<span style="padding-left: 3em">(артыкул 36, п. 2)</span>

Уся праграмная частка распаўсюджваецца пад BSD-падобнай ліцэнзіяй з 2 пунктаў, гл. яе тэкст [на рускай мове](license_RU.md) ці [на англійскай мове](license_EN.md). Калі вы выкарыстоўваеце ЭКБМ у сваіх даследаваннях, пажадана (але не абавязкова) спасылацца на [старонку](https://github.com/poritski/YABC) нашага праекта ці на артыкул: _О. А. Волчек, В. В. Порицкий._ Экспериментальный корпус белорусского языка: текущее состояние и перспективы развития // Труды международной конференции &laquo;Корпусная лингвистика–2013&raquo;. – СПб.: СПбГУ, 2013. – С. 231–238.

## Гісторыя версій ##

_3 кастрычніка 2012 г.:_ У сеціве змешчаны дэманстрацыйны фрагмент корпуса.

_1 красавіка 2013 г.:_ Дададзены такенізатар. Праграмы для індэксацыі і пошуку ўдасканалены, каб працаваць з такенізаванымі тэкстамі. Частоты словаўжыванняў больш не адлюстроўваюцца ў файле вынікаў.

_16 красавіка 2013 г.:_ Дададзены дэманстрацыйны фрагмент калекцыі газет 1960-х гадоў (частковую дакументацыю гл. у файле `./np_old/DEPENDENCIES.md`).

_28 лістапада 2013 г.:_ Першы поўны рэліз. Тэксты асноўнага корпуса пралематызаваны, можна ажыццяўляць пошук па шматслоўных выразах з улікам лем і граматычных звестак.
